<!DOCTYPE html>
<html lang="en">
<head>
    <title>ANTI-FRAUD SYSTEM | Nilgiris District Police</title>
    <link rel="stylesheet" href="/static/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="dashboard">

<!-- ================= HEADER ================= -->
<div class="navbar">
    <div class="nav-left">
        <img src="/static/police_logo.png" height="42">
        <div>
            <h2>ANTI-FRAUD SYSTEM</h2>
            <span>Nilgiris District Police</span>
        </div>
    </div>

    <div class="nav-right">
        <span id="lastUpdated"></span>
        <a href="/home">Home</a>
        <a href="/upload">Upload</a>
        <a href="/logout">Logout</a>
    </div>
</div>

<!-- ================= DASHBOARD ================= -->
<div class="dashboard-grid">

    <!-- ===== KPI ROW ===== -->
    <div class="kpi-grid">
        <div class="kpi-card red">
            <p>Fraud Alerts</p>
            <h1>52</h1>
        </div>

        <div class="kpi-card green">
            <p>Blocked Attempts</p>
            <h1>18,950</h1>
        </div>

        <div class="kpi-card blue">
            <p>Live Incidents</p>
            <h1>7</h1>
        </div>

        <div class="kpi-card ring">
            <canvas id="preventionChart"></canvas>
        </div>
    </div>

    <!-- ===== VISUAL GRID ===== -->
    <div class="visual-grid">

        <div class="panel">
            <h3>Fraud Types</h3>
            <canvas id="fraudTypeChart"></canvas>
        </div>

        <div class="panel">
            <h3>Blocked Attempts Trend</h3>
            <canvas id="blockedTrendChart"></canvas>
        </div>

        <div class="panel">
            <h3>Real-Time Behavior</h3>
            <canvas id="behaviorChart"></canvas>
        </div>

        <div class="panel">
            <h3>Region Activity</h3>
            <canvas id="regionChart"></canvas>
        </div>

        <div class="panel">
            <h3>Threat Severity Index</h3>
            <canvas id="severityChart"></canvas>
        </div>

        <div class="panel">
            <h3>Live Case Load</h3>
            <canvas id="caseLoadChart"></canvas>
        </div>

    </div>
</div>

<script>
document.getElementById("lastUpdated").innerText =
    "Last updated: " + new Date().toLocaleTimeString();

/* Prevention Ring */
new Chart(document.getElementById("preventionChart"), {
    type: "doughnut",
    data: {
        datasets: [{
            data: [93, 7],
            backgroundColor: ["#22c55e", "#1f2937"]
        }]
    },
    options: {
        cutout: "75%",
        plugins:{legend:{display:false}}
    }
});

/* Fraud Types */
new Chart(fraudTypeChart, {
    type:"bar",
    data:{
        labels:["Phishing","Card","Identity"],
        datasets:[{data:[22,18,12], backgroundColor:"#ef4444"}]
    },
    options:{plugins:{legend:{display:false}}}
});

/* Blocked Trend */
new Chart(blockedTrendChart,{
    type:"line",
    data:{labels:[1,2,3,4,5],datasets:[{data:[10,20,18,30,40],borderColor:"#22c55e"}]},
    options:{plugins:{legend:{display:false}}}
});

/* Behavior */
new Chart(behaviorChart,{
    type:"line",
    data:{labels:["10s","20s","30s","40s"],datasets:[{data:[4,6,5,7],borderColor:"#38bdf8"}]},
    options:{plugins:{legend:{display:false}}}
});

/* Region */
new Chart(regionChart,{
    type:"bar",
    data:{labels:["Ooty","Coonoor","Kotagiri","Gudalur"],datasets:[{data:[4,2,3,1]}]},
    options:{plugins:{legend:{display:false}}}
});

/* Severity */
new Chart(severityChart,{
    type:"bar",
    data:{labels:["Low","Medium","High"],datasets:[{data:[8,14,22]}]},
    options:{plugins:{legend:{display:false}}}
});

/* Case Load */
new Chart(caseLoadChart,{
    type:"line",
    data:{labels:[1,2,3,4,5],datasets:[{data:[15,18,16,20,25]}]},
    options:{plugins:{legend:{display:false}}}
});
</script>

</body>
</html>
